<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[程序猎人的博客]]></title>
  <link href="http://programus.github.com/atom.xml" rel="self"/>
  <link href="http://programus.github.com/"/>
  <updated>2012-03-06T23:46:27+09:00</updated>
  <id>http://programus.github.com/</id>
  <author>
    <name><![CDATA[程序猎人]]></name>
    <email><![CDATA[programus@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[为Octopress追加[分享到微博]按钮]]></title>
    <link href="http://programus.github.com/blog/2012/03/04/share-weibo-button/"/>
    <updated>2012-03-04T20:11:00+09:00</updated>
    <id>http://programus.github.com/blog/2012/03/04/share-weibo-button</id>
    <content type="html"><![CDATA[<p>昨天加上了<a href="http://weibo.com" title="新浪微博">微博</a>的侧边栏。今天发现每篇微博下面还有一个<code>Tweet</code>按钮。还是那句话，在<a href="http://zh.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E9%95%BF%E5%9F%8E" title="叹息之墙">墙</a>后面，<a href="http://twitter.com/" title="Twitter">Twitter</a>用不到，所以<a href="http://weibo.com" title="新浪微博">微博</a>的分享按钮不可缺少。</p>

<!--more-->


<p>有了昨天的经验，今天也就没去网上查什么资料。直接去<a href="http://weibo.com" title="新浪微博">新浪微博</a>找到<a href="http://open.weibo.com/sharebutton" title="新浪微博分享按钮">分享按钮</a>的页面，生成一个按钮代码。</p>

<div><script src='https://gist.github.com/1972564.js?file='></script>
<noscript><pre><code>&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;
(function(){
  var _w = 86 , _h = 50;
  var param = {
    url:location.href,
    type:'6',
    count:'1', /**是否显示分享数，1显示(可选)*/
    appkey:'', /**您申请的应用appkey,显示分享来源(可选)*/
    title:'', /**分享的文字内容(可选，默认为所在页面的title)*/
    pic:'', /**分享图片的路径(可选)*/
    ralateUid:'1098907490', /**关联用户的UID，分享微博会@该用户(可选)*/
    language:'zh_cn', /**设置语言，zh_cn|zh_tw(可选)*/
    rnd:new Date().valueOf()
  }
  var temp = [];
  for( var p in param ){
    temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )
  }
  document.write('&lt;iframe allowTransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; src=&quot;http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&amp;') + '&quot; width=&quot;'+ _w+'&quot; height=&quot;'+_h+'&quot;&gt;&lt;/iframe&gt;')
})()
&lt;/script&gt;</code></pre></noscript></div>


<p>仔细看看生成的按钮，虽然上面写了一大堆JavaScript，但实际有用的就是最后一行<code>document.write('...')</code>里面的HTML代码。但这里HTML的主要部分都是用JavaScript生成的。于是祭出网页分析神器——<a href="http://getfirebug.com/" title="Firebug">Firebug</a>，直接分析<a href="http://open.weibo.com/sharebutton" title="新浪微博分享按钮">分享按钮</a>页面里例子的HTML代码。从中提取出如下URL（为了便于阅读，格式做了调整）——</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://hits.sinajs.cn/A1/weiboshare.html?
</span><span class='line'>  url=http%3A%2F%2Fopen.weibo.com%2Fsharebutton&
</span><span class='line'>  appkey=&
</span><span class='line'>  type=6&
</span><span class='line'>  ralateUid=1098907490&
</span><span class='line'>  language=zh_cn</span></code></pre></td></tr></table></div></figure>


<p>其中各个参数的意思，参看生成的JavaScript的注释，基本一目了然了。下一步，嵌入代码到博客下面的分享栏里。</p>

<p>经过一番查找，分享栏的代码存储在<code>source/_includes/post/sharing.html</code>中。果断加入代码：</p>

<div><script src='https://gist.github.com/1972657.js?file=sharing.html'></script>
<noscript><pre><code>&lt;div class=&quot;sharing&quot;&gt;
  {% if site.weibo_share %}
  &lt;span&gt;
  &lt;iframe 
    width=&quot;86&quot; 
    scrolling=&quot;no&quot; 
    height=&quot;16&quot; 
    frameborder=&quot;0&quot; 
    src=
      &quot;http://hits.sinajs.cn/A1/weiboshare.html?url={{ site.url }}{{ page.url }}&amp;amp;type=6&amp;amp;{% if site.weibo_uid %}ralateUid={{ site.weibo_uid }}&amp;amp;{% endif %}language=zh_cn&quot; allowtransparency=&quot;true&quot;&gt;
  &lt;/iframe&gt;
  &lt;/span&gt;
  {% endif %}
  {% if site.twitter_tweet_button %}
  &lt;a href=&quot;http://twitter.com/share&quot; class=&quot;twitter-share-button&quot; data-url=&quot;{{ site.url }}{{ page.url }}&quot; data-via=&quot;{{ site.twitter_user }}&quot; data-counturl=&quot;{{ site.url }}{{ page.url }}&quot; &gt;Tweet&lt;/a&gt;
  {% endif %}
  {% if site.google_plus_one %}
  &lt;div class=&quot;g-plusone&quot; data-size=&quot;{{ site.google_plus_one_size }}&quot;&gt;&lt;/div&gt;
  {% endif %}
  {% if site.facebook_like %}
    &lt;div class=&quot;fb-like&quot; data-send=&quot;true&quot; data-width=&quot;450&quot; data-show-faces=&quot;false&quot;&gt;&lt;/div&gt;
  {% endif %}
&lt;/div&gt;
&lt;hr style=&quot;border-bottom:1px dotted #bdbabd;height:1px;border-top:0px;border-left:0px;border-right:0px;&quot; /&gt;
</code></pre></noscript></div>


<p>其中最后一行是自己调整了一下看着顺眼的格式。</p>

<p>同时要在<code>_config.yml</code>文件中加入<code>weibo_share</code>的设定。</p>

<div><script src='https://gist.github.com/1972657.js?file=_config.yml'></script>
<noscript><pre><code># Weibo
# Please refer to http://weibo.com/tool/weiboshow to get your uid and verifier. 
weibo_uid: 1098907490
weibo_verifier: abd54ad9
weibo_fansline: 0   # How many lines for the fan list
weibo_show: true    # Whether you want your weibo content to be shown
weibo_pic: true     # Whether you want the pictures in weibo to be shown
weibo_skin: 10      # Please refer to http://weibo.com/tool/weiboshow
weibo_share: true   # Whether show the sharing button
</code></pre></noscript></div>


<p>最后，为了更换主题时不会出问题，对<code>.theme/&lt;所用的主题名&gt;/source/_includes/post/sharing.html</code>也做了相应的修改。</p>

<p>最后，生成网页、启动服务器测试——</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate
</span><span class='line'>rake preview</span></code></pre></td></tr></table></div></figure>


<p>查看预览网页<a href="http://localhost:4000">http://localhost:4000</a>……<strong>按钮加入成功</strong>！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[为Octopress博客追加新浪微博侧栏]]></title>
    <link href="http://programus.github.com/blog/2012/03/03/add-weibo-sidebar-into-octopress/"/>
    <updated>2012-03-03T21:43:00+09:00</updated>
    <id>http://programus.github.com/blog/2012/03/03/add-weibo-sidebar-into-octopress</id>
    <content type="html"><![CDATA[<p>配置好了基于Octopress的博客后，发现其右侧边栏（位置自然根据主题会有不同）上有<a href="http://twitter.com/" title="Twitter">Twitter</a>等内容。因为<a href="http://zh.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E9%95%BF%E5%9F%8E" title="叹息之墙">墙</a>的原因，<a href="http://twitter.com/" title="Twitter">Twitter</a>始终使用起来不够方便，所以还是<a href="http://weibo.com" title="新浪微博">新浪微博</a>用的更多。于是，就想在博客里弄一个<a href="http://weibo.com" title="新浪微博">微博</a>的侧边栏。</p>

<!--more-->


<p><img class="left" src="http://programus.github.com/images/posts/octopress-weibo.png" title="" ></p>

<h3>实现设想</h3>

<p><a href="http://weibo.com" title="新浪微博">微博</a>本身提供了一个嵌入侧边栏的工具，叫<a href="http://weibo.com/tool/weiboshow" title="微博秀">微博秀</a>。于是便想是不是简单嵌入即可呢？</p>

<h3>其他尝试</h3>

<p>但对稍有点费劲的工作，当然首先是上网搜索一下是否有现成方案。果然找到了一篇文章——《<a href="http://blog.tingkun.com/blog/2011/11/05/xin-lang-wei-bo-ce-lan-widgetding-zhi-octopress/">新浪微博侧栏widget定制</a>》。</p>

<p>仔细查看了一下代码，发现作者好粗心，代码里居然没有用变量，而是把自己的用户名直接硬写进去了。另外，貌似只实现了<code>微博名片</code>和<code>关注按钮</code>。而且因为使用了<a href="http://weibo.com" title="新浪微博">微博</a>的JavaScript API，所以需要一个APP ID。</p>

<h3>回归</h3>

<p>我是懒人，不想搞得那么复杂。于是继续回到自己最初的方案——嵌入<a href="http://weibo.com/tool/weiboshow" title="微博秀">微博秀</a>。</p>

<p>先到<a href="http://weibo.com/tool/weiboshow" title="微博秀">微博秀</a>里面生成自己的微博秀嵌入代码。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;iframe 
</span><span class='line'>  width="100%" 
</span><span class='line'>  height="550" 
</span><span class='line'>  class="share_self"  
</span><span class='line'>  frameborder="0" 
</span><span class='line'>  scrolling="no" 
</span><span class='line'>  src="http://widget.weibo.com/weiboshow/index.php?
</span><span class='line'>      width=0&
</span><span class='line'>      height=550&
</span><span class='line'>      fansRow=1&
</span><span class='line'>      ptype=1&
</span><span class='line'>      speed=0&
</span><span class='line'>      skin=2&
</span><span class='line'>      isTitle=0&
</span><span class='line'>      noborder=1&
</span><span class='line'>      isWeibo=1&
</span><span class='line'>      isFans=1&
</span><span class='line'>      uid=1098907490&
</span><span class='line'>      verifier=abd54ad9&
</span><span class='line'>      dpc=1"&gt;
</span><span class='line'>&lt;/iframe&gt;</span></code></pre></td></tr></table></div></figure>


<p>仔细一看，其实就是一个大URL，尝试一下各种参数。最终写了一个<code>weibo.html</code>，放到了<code>source/_includes/asides</code>下面。貌似在<code>.theme/&lt;所用的主题名&gt;/source/_includes/asides</code>下面放着更好，因为切换主题时不会丢失。</p>

<div><script src='https://gist.github.com/1966517.js?file=weibo.html'></script>
<noscript><pre><code>{% if site.weibo_uid %}
&lt;section&gt;
  &lt;h1&gt;新浪微博&lt;/h1&gt;
  &lt;ul id=&quot;weibo&quot;&gt;
    &lt;li&gt;
      &lt;iframe 
        width=&quot;100%&quot; 
        height=&quot;550&quot; 
        class=&quot;share_self&quot; 
        frameborder=&quot;0&quot; 
        scrolling=&quot;no&quot; 
        src=&quot;http://widget.weibo.com/weiboshow/index.php?width=0&amp;height=550&amp;ptype={% if site.weibo_pic %}1{% else %}0{% endif %}&amp;speed=0&amp;skin={{weibo_skin}}&amp;isTitle=0&amp;noborder=1&amp;isWeibo={% if site.weibo_show %}1{% else %}0{% endif %}&amp;isFans={{weibo_fansline}}&amp;uid={{site.weibo_uid}}&amp;verifier={{site.weibo_verifier}}&quot;&gt;
      &lt;/iframe&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/section&gt;
{% endif %}
</code></pre></noscript></div>


<p>同时，在<code>_config.yml</code>中加入相关设定——</p>

<div><script src='https://gist.github.com/1966517.js?file=_config.yml'></script>
<noscript><pre><code># 其它内容....

default_asides: [asides/recent_posts.html, asides/weibo.html, asides/github.html, asides/[Twitter][].html, asides/googleplus.html]

# 其它内容....

# Weibo
# Please refer to http://weibo.com/tool/weiboshow to get your uid and verifier. 
weibo_uid: 1098907490
weibo_verifier: abd54ad9
weibo_fansline: 0   # 粉丝显示多少行
weibo_show: true    # 是否显示最近微博内容
weibo_pic: true     # 是否显示微博中的图片
weibo_skin: 10      # 使用哪种配色风格，数字为从1开始的微博秀风格序号

# 其它内容....</code></pre></noscript></div>


<p>其中的<code>weibo_uid</code>和<code>weibo_verifier</code>是从<a href="http://weibo.com/tool/weiboshow" title="微博秀">微博秀</a>生成的代码中取得的，其它则是显示设定。</p>

<p>至此，搞定了微博的嵌入。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第一篇用Octopress生成的日志]]></title>
    <link href="http://programus.github.com/blog/2012/03/01/first-post-by-octopress/"/>
    <updated>2012-03-01T21:31:00+09:00</updated>
    <id>http://programus.github.com/blog/2012/03/01/first-post-by-octopress</id>
    <content type="html"><![CDATA[<p>先是在知乎上发现了一个叫<a href="http://www.zhihu.com/people/lv-kun" title="吕坤的知乎主页">吕坤</a>的人，顺着简介发现了<a href="http://lvkun.github.com/" title="吕坤的github博客">他的博客</a>。然后了解到可以使用github来写博客，觉得很好玩，就打算试一试。</p>

<!--more-->


<p>我不像<a href="http://www.zhihu.com/people/lv-kun" title="吕坤的知乎主页">吕坤</a>对<a href="http://www.ruby-lang.org" title="Ruby">Ruby</a>那么大意见，所以装了运行Jekyll的一切必需品，现学<a href="http://git-scm.com/" title="Git">Git</a>（这个早就听说了，一直没用到所以没学）、<a href="https://github.com/mojombo/jekyll/wiki" title="Jekyll">Jekyll</a>、<a href="http://daringfireball.net/projects/markdown/" title="Markdown">Markdown</a>……折腾了一个星期天，终于可以显示博客了。正高兴呢，忽然发现服务器不正常了。</p>

<p>经过一番查找，发现是因为<a href="https://github.com/mojombo/jekyll/wiki" title="Jekyll">Jekyll</a>运行时使用默认环境的地区编码信息，所以不识别UTF-8编码中的中文。从网上搜到Windows下可以使用<code>chcp</code>来改变语言编码，于是试了试<code>chcp 65001</code>，发现运行</p>

<pre><code>jekyll --pygments --safe --auto --server
</code></pre>

<p>之后没有任何显示。遂放弃。</p>

<p>继续查，发现哪怕在Windows下，只要设置<code>LANG</code>和<code>LC_ALL</code>后，便可以设置的编码运行。于是</p>

<div><script src='https://gist.github.com/1972602.js?file='></script>
<noscript><pre><code>set LANG=zh_CN.UTF-8
set LC_ALL=zh_CN.UTF-8</code></pre></noscript></div>


<p>然后再次运行<code>jekyll</code>，<strong>正常了！</strong></p>

<p>于是才有了此篇日志。</p>

<hr />

<p>本来用<a href="https://github.com/mojombo/jekyll/wiki" title="Jekyll">Jekyll</a>的日志已经做好了，但是发现无法从手机上正常浏览。又懒得去研究怎么调整HTML、CSS那一套东西。正一筹莫展之际，发现了<a href="http://octopress.org" title="Octopress">Octopress</a>这个东西。于是毅然变节，改投<a href="http://octopress.org" title="Octopress">Octopress</a>，于是有了现在的后半段。</p>

<p><a href="http://octopress.org" title="Octopress">Octopress</a>比较有趣，会把代码放在<code>source</code>目录下，把生成的网站放在<code>_deploy</code>目录下。（当然所有目录都可以通过设置修改。）然后会自动将<code>_deploy</code>目录作为github page的<code>master</code>分支，将包含source在内的部分作为github page的<code>source</code>分支。</p>

<p>对<a href="http://git-scm.com/" title="Git">Git</a>还不是特别了解，或许领会不到如此分离的真谛，但隐约能感觉到这样做会使Repository里的结构清晰很多。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[TinyCountdown - 小巧纯粹的倒计时软件]]></title>
    <link href="http://programus.github.com/blog/2010/11/15/tiny-countdown/"/>
    <updated>2010-11-15T23:37:00+09:00</updated>
    <id>http://programus.github.com/blog/2010/11/15/tiny-countdown</id>
    <content type="html"><![CDATA[<p>自从工作以后，一直面临一个问题：开会超时。而作为IT公司的会议，又有一个常见的情况——共享或投影屏幕。</p>

<p>基于此，在上周的一次会议上，我在共享屏幕的同时，挂上了一个倒计时程序。效果还不错。毕竟发言者在众目睽睽之下超时实在很没面子。但是，那个计时程序上面的很多按钮实在太占地方，在共享屏幕的时候常常遮挡住必要内容，导致不得不移来移去。于是乎，作为IT从业人员，再次热血沸腾，写了一个更加小巧的倒计时软件。既然小巧是最主要特点，于是便命名为——</p>

<p><strong>TinyCountdown</strong></p>

<!--more-->


<p><img src="http://i141.photobucket.com/albums/r60/programus/software/TinyCountdown_preview.gif" title="screenshot" ></p>

<p>程序运行后，没有任何累赘的标题栏、按钮、菜单等。唯一有效内容之外的累赘就是一个为了方便改变窗口大小的窗口边框。（好吧，我承认技术上去掉这个也是可能的，我在偷懒……）</p>

<p>有君问：啥都没有，怎么操控？</p>

<p>答曰：鼠标 或 键盘，组合更悠然。</p>

<p>操作说明窗口会在鼠标飘过主窗口时出现，为了软件的通用性，做成了英文的。</p>

<p>现将中文概述如下：</p>

<table>
<thead>
<tr>
<th align="left">功能             </th>
<th align="left"> 鼠标操作       </th>
<th align="left"> 键盘操作 </th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">开始倒计时       </td>
<td align="left">单击左键        </td>
<td align="left">空格</td>
</tr>
<tr>
<td align="left">暂停倒计时       </td>
<td align="left">单击左键        </td>
<td align="left">空格</td>
</tr>
<tr>
<td align="left">重置倒计时       </td>
<td align="left">单击左键(停止时)</td>
<td align="left">Backspace</td>
</tr>
<tr>
<td align="left">设置倒计时时间    </td>
<td align="left">单击右键       </td>
<td align="left">回车</td>
</tr>
<tr>
<td align="left">关闭程序          </td>
<td align="left">将主窗口缩至极小</td>
<td align="left">ESC</td>
</tr>
<tr>
<td align="left">帮助窗口显示/隐藏 </td>
<td align="left">单击中键        </td>
<td align="left">F1</td>
</tr>
<tr>
<td align="left">设置主窗口总在最前</td>
<td align="left">               </td>
<td align="left">HOME</td>
</tr>
<tr>
<td align="left">取消主窗口总在最前</td>
<td align="left">               </td>
<td align="left">END</td>
</tr>
<tr>
<td align="left">全屏幕切换        </td>
<td align="left">               </td>
<td align="left">M</td>
</tr>
</tbody>
</table>


<p>其他隐藏操作，请自行摸索。</p>

<p>为保证程序的小巧和绿色，程序不会保存任何设置，默认倒计时时间为15分钟，默认开启帮助窗口，默认程序出现在窗口右上角，默认程序为总在最前。程序内置内存优化机制，平均占用内存在1MB左右，内存占用峰值不足2MB。</p>

<p>希望有习惯整洁小巧的人士喜欢。</p>

<p>忘了说了，本程序只能在Windows平台上运行，对不起Mac和Linux等的兄弟了。望不要介意。</p>

<p>下载地址：</p>

<p><a href="http://code.google.com/p/tinytool/downloads/detail?name=TinyCountdown.exe">http://code.google.com/p/tinytool/downloads/detail?name=TinyCountdown.exe</a></p>
]]></content>
  </entry>
  
</feed>
